#
# StopBabyLooper, for SR, CR0b, CR2l
#
To run:
 > cd ../StopCORE/
 > make
 > cd ../StoBabyLooper/
 > . go_go_analyzer

Histograms, tables, plots, and log files are written to

Output/

To clean up compiled code, execute:
 > . clean.sh


Descriptions of each function used in go_go_analyzer as follows:


# Create Histograms of all samples
root -l -b -q head.C stopBabyLooper.C++ >& Output/Log/stopBabyLooper.log 


# If, necessary, scale samples (should be done in looper, function is available in StopCORE for this)
#   This is if kFactors or XSec change and need to have a flat SF for a sample
root -l -b -q head.C scaleSamples.C++'("Output/Histos/", "Output/Histos/")' >& Output/Log/scaleSamples.log

# Merge Samples, to print cutflow before zeroing negative yields in aMC@NLO samples
root -l -b -q head.C mergeStopBabies.C++'("Output/Histos/", "Output/Histos/",false)' >& Output/Log/mergeStopBabies_beforeZeroingAMCNLO.log

# Print yield tables of all inputs
root -l -b -q head.C tableMaker_allInputs.C++'("Output/Histos/","Output/Tables/yields_allInputs_beforeZeroing.tex",false)' >& Output/Log/tableMaker_allInputs_beforeZeroingAMCNLO.log 

# For aMC@NLO samples, zero yields if final weight is negative
root -l -b -q head.C zeroOutNegativeYields.C++'("Output/Histos/")' >& Output/Log/zeroOutNegativeYields.log

# Merge Samples
root -l -b -q head.C mergeStopBabies.C++'("Output/Histos/", "Output/Histos/",true)' >& Output/Log/mergeStopBabies.log

# Print yields of all inputs
root -l -b -q head.C tableMaker_allInputs.C++'("Output/Histos/","Output/Tables/yields_allInputs.tex")' >& Output/Log/tableMaker_allInputs.log 

# Print yields of summed inputs - ie Rare, or Z->NuNu
root -l -b -q head.C tableMaker_summedInputs.C++'("Output/Histos/","Output/Tables/yields_summedInputs.tex")' >& Output/Log/tableMaker_summedInputs.log 

# Calculate Uncertainties - CURRENTLY NEEDS VALIDATION FOR NEW STOPCORE
#root -l -b -q head.C calcErrors.C++ >& Output/Log/calcErrors.log

# Make plots - NEEDS TO BE UPDATED FOR NEW STOPCORE
#root -l -b -q head.C plotMaker.C++ >& Output/Log/plotMaker_byGenDecay.log
#root -l -b -q head.C plotMaker.C++'(false)' >& Output/Log/plotMaker_byProduction.log

# Background Estimates - SHOULD BE WORKING, NEEDS VALIDATION
#root -l -b -q head.C bkgEstimate_diLepton.C++ >& Output/Log/bkgEstimate_diLepton.log

# Create pdfs of latex files
echo "Converting Tex to PDF"
echo ""
cd Output/Tables/
for x in `/bin/ls *.tex`; do pdflatex $x; pdflatex $x; done
cd ../BkgEstimate/
for x in `/bin/ls *.tex`; do pdflatex $x; pdflatex $x; done
cd ../../

# Done!
echo ""
echo "----------------------------------"
echo " Analysis Results Written To: "
echo "   Output/ " 
echo "---------------------------------"